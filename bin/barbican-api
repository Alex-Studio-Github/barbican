#!/bin/bash

# barbican-api - Script run Cloudkeep's Barbican API app.

PKG=barbican

# For local development, set VENV_PYTHON equal to the path to your virtual environment's site-packages location
VENV_PYTHON=./.venv_barbican/lib/python2.7/site-packages

PATH=/opt/uwsgi:/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/bin:/etc/$PKG:$PATH
CONF_FILE=/etc/$PKG/barbican-api.ini
if [ ! -f $CONF_FILE ];
then
  CONF_FILE=./etc/$PKG/barbican-api.ini
  PYTHONPATH=$VENV_PYTHON:$PYTHONPATH
fi

echo 'Running barbican-api uwsgi process, using init file here: ' $CONF_FILE
uwsgi --ini $CONF_FILE
